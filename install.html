
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Installation and Usage &#8212; sap-map 0.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Algorithm Overview" href="algorithm.html" />
    <link rel="prev" title="Spatal Access Priority Mapping (sap-map)" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="installation-and-usage">
<h1>Installation and Usage<a class="headerlink" href="#installation-and-usage" title="Permalink to this heading">¶</a></h1>
<p>A Docker recipe is available to install <code class="docutils literal notranslate"><span class="pre">sapmap</span></code> in an isolated virtual environment on your local computer with all dependencies.  In the future, a published module may be made available.</p>
<ol class="arabic simple">
<li><p>First install and start <a class="reference external" href="https://www.docker.com/">Docker Desktop</a> on your local computer.  Windows, MacOS, Linux are all supported.</p></li>
<li><p>Clone the code, build a docker image, run a container with the image and open a shell to it, run final sap setup, then run the test suite to verify it’s working:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>    git clone https://github.com/seasketch/python-sap-map.git
    <span class="nb">cd</span> python-sap-map
    docker-compose build sapmap
    docker-compose run --rm --service-ports sapmap
    setup_sap_map
    pytest
</pre></div>
</div>
<div class="section" id="example-projects">
<h2>Example Projects<a class="headerlink" href="#example-projects" title="Permalink to this heading">¶</a></h2>
<p>Multiple example projects are included that can be run out of the box.</p>
<p><code class="docutils literal notranslate"><span class="pre">Simple</span></code> - small geographic extent.  Very simple test dataset with polygons that aligned to 100m boundaries for ease of interpreting the result.  Produces raster with 100m cell size.</p>
<p><code class="docutils literal notranslate"><span class="pre">Maldives</span></code> - medium geographic extent.  Produces raster with 100m cell size.</p>
<p><code class="docutils literal notranslate"><span class="pre">Canada</span></code> - large geographic extent. Demonstrates pushing the limits of raster file size and memory usage.  Produces raster with 400m cell size.</p>
<div class="section" id="run-the-simple-project">
<h3>Run the Simple project<a class="headerlink" href="#run-the-simple-project" title="Permalink to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">examples</span><span class="o">/</span><span class="n">simple</span>
<span class="n">gen_sap_map</span> <span class="n">config</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="run-the-canada-project">
<h2>Run the Canada project<a class="headerlink" href="#run-the-canada-project" title="Permalink to this heading">¶</a></h2>
<p>You will need to generate random input data first.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">examples</span><span class="o">/</span><span class="n">canada</span>

<span class="o">../../</span><span class="n">scripts</span><span class="o">/</span><span class="n">gen_random_shapes</span> <span class="n">config</span><span class="o">.</span><span class="n">json</span> <span class="n">canada</span><span class="o">-</span><span class="n">poly</span><span class="o">.</span><span class="n">geojson</span>

<span class="n">gen_sap_map</span> <span class="n">config</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-a-new-project">
<h2>Creating a New Project<a class="headerlink" href="#creating-a-new-project" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Start with copying any of the example folders</p></li>
<li><p>Copy your input shapes in</p></li>
<li><p>Start with a simple config.json. Let it use the default bounds of the input shapes, cell size (100m), etc.</p></li>
</ul>
<p>Bounds:</p>
<ul class="simple">
<li><p>Useful <a class="reference external" href="https://tools.geofabrik.de/calc/#type=geofabrik_standard&amp;tab=1&amp;proj=EPSG:4326&amp;places=2">tool</a> to quickly identify bounds.</p></li>
</ul>
</div>
<div class="section" id="alternative-install-work-in-progress">
<h2>Alternative Install (Work in progress)<a class="headerlink" href="#alternative-install-work-in-progress" title="Permalink to this heading">¶</a></h2>
<div class="section" id="install-and-run-in-osx">
<h3>Install and run in OSX<a class="headerlink" href="#install-and-run-in-osx" title="Permalink to this heading">¶</a></h3>
<p>Install pipenv to your user home directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">pip3</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span> <span class="n">pipenv</span>
</pre></div>
</div>
<p>Add user base binary directory to your PATH</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">twelch</span><span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Python</span><span class="o">/</span><span class="mf">3.9</span><span class="o">/</span><span class="nb">bin</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">pip3</span> <span class="n">install</span> <span class="n">numpy</span>
    <span class="n">pip3</span> <span class="n">install</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">binary</span> <span class="n">fiona</span> <span class="n">rasterio</span> <span class="n">shapely</span>
</pre></div>
</div>
</div>
<div class="section" id="install-and-run-in-windows">
<h3>Install and run in Windows<a class="headerlink" href="#install-and-run-in-windows" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Install VS Code - https://code.visualstudio.com/Download</p></li>
<li><p>Install python 3 from Windows Store if possible, otherwise use python.org.  If you use python.org be sure to ‘add Python to my path’ and turn off execution aliases for Python (or else it will try to open the windows store every time you run python</p></li>
<li><p>Open terminal and run GitBash terminal</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="o">&amp;</span> <span class="s1">&#39;C:\Program Files\Git</span><span class="se">\b</span><span class="s1">in</span><span class="se">\b</span><span class="s1">ash.exe&#39;</span>
</pre></div>
</div>
<p>Windows Option 1: Docker</p>
<p>Install and start Docker for Windows, then build and start a sapmap Docker image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">seasketch</span><span class="o">/</span><span class="n">python</span><span class="o">-</span><span class="n">sap</span><span class="o">-</span><span class="nb">map</span><span class="o">.</span><span class="n">git</span>
    <span class="n">cd</span> <span class="n">python</span><span class="o">-</span><span class="n">sap</span><span class="o">-</span><span class="nb">map</span>
    <span class="n">docker</span><span class="o">-</span><span class="n">compose</span> <span class="n">build</span> <span class="n">debug</span> <span class="c1"># not necessary?</span>
    <span class="n">docker</span><span class="o">-</span><span class="n">compose</span> <span class="n">run</span> <span class="o">--</span><span class="n">rm</span> <span class="o">--</span><span class="n">service</span><span class="o">-</span><span class="n">ports</span> <span class="n">sapmap</span>
</pre></div>
</div>
<p>Windows Option 2: Python virtual environment</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">pip</span> <span class="n">install</span> <span class="n">virtualenv</span>
    <span class="n">virtualenv</span> <span class="n">env</span><span class="o">-</span><span class="n">sapmap</span>
    <span class="n">source</span> <span class="n">env</span><span class="o">-</span><span class="n">sapmap</span><span class="o">/</span><span class="n">Scripts</span><span class="o">/</span><span class="n">activate</span>
    <span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pip</span>
</pre></div>
</div>
<p>Follow the rasterio windows instructions - https://rasterio.readthedocs.io/en/latest/installation.html#windows
Pointed to install GDAL and Rasterio wheels from https://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal.  Look for the latest win_amd64:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">pip</span> <span class="n">install</span> <span class="o">.</span>\<span class="n">GDAL</span><span class="o">-</span><span class="mf">3.3</span><span class="o">.</span><span class="mi">1</span><span class="o">-</span><span class="n">cp39</span><span class="o">-</span><span class="n">cp39</span><span class="o">-</span><span class="n">win_amd64</span><span class="o">.</span><span class="n">whl</span>
    <span class="n">pip</span> <span class="n">install</span> <span class="o">.</span>\<span class="n">rasterio</span><span class="o">-</span><span class="mf">1.2</span><span class="o">.</span><span class="mi">6</span><span class="o">-</span><span class="n">cp39</span><span class="o">-</span><span class="n">cp39</span><span class="o">-</span><span class="n">win_amd64</span><span class="o">.</span><span class="n">whl</span>
    <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
    <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements_dev</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>deactivate the virtual Python environment when done, activate again when needed, or delete</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">deactivate</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">sap-map</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation and Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#example-projects">Example Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-the-canada-project">Run the Canada project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-new-project">Creating a New Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#alternative-install-work-in-progress">Alternative Install (Work in progress)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="algorithm.html">Algorithm Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">sapmap module</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Spatal Access Priority Mapping (sap-map)</a></li>
      <li>Next: <a href="algorithm.html" title="next chapter">Algorithm Overview</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, The Regents of the University of California.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/install.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>