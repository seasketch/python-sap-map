
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Algorithm Overview &#8212; sap-map 0.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Publications" href="publications.html" />
    <link rel="prev" title="Installation and Usage" href="install.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="tex2jax_ignore mathjax_ignore section" id="algorithm-overview">
<h1>Algorithm Overview<a class="headerlink" href="#algorithm-overview" title="Permalink to this headline">¶</a></h1>
<p>Assume two people draw areas important to them. Person one draws 2 polygons (in orange), and Person two draws 3 polygons (in green).</p>
<p><img alt="example polygon" src="_images/survey-polygon.png" /></p>
<p>Each person has a total value of 100 that they distribute over those areas.</p>
<p><img alt="example polygon with importance" src="_images/survey-polygon-importance.png" /></p>
<p><code class="docutils literal notranslate"><span class="pre">sapmap</span></code> then calculates a Spatial Access Priority value for each polygon:</p>
<p><img alt="\Large x=\frac{-b\pm\sqrt{b^2-4ac}}{2a}" src="https://latex.codecogs.com/svg.latex?SAP=%5Cfrac%7Bimportance%7D%7Barea%7D" /></p>
<p>In this example, the polygon with an importance of 10 is 25 square meters per side or 625 square meters in area.  It’s SAP value is calculated as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">10</span> <span class="o">/</span> <span class="mi">625</span> <span class="n">square</span> <span class="n">meters</span> <span class="o">=</span> <span class="o">.</span><span class="mi">016</span> <span class="o">/</span> <span class="n">square</span> <span class="n">meters</span>
</pre></div>
</div>
<p>This can be read as <code class="docutils literal notranslate"><span class="pre">.016</span> <span class="pre">per</span> <span class="pre">square</span> <span class="pre">meter</span></code>.  In other words, the value or importance is spread over the area equally.</p>
<p><img alt="survey sap map" src="_images/survey-polygon-sap.png" /></p>
<p>The polygons are then <code class="docutils literal notranslate"><span class="pre">rasterized</span></code>, by overlaying them with a rectangular grid of pixels and combining their values.  The discrete nature of polygons are traded for the ability to represent the importance of areas as a continuous field, sampled at the rate of once per grid pixel.  The smaller the grid pixels are, the more it retains the original accuracy of the polygons.  In this example, each grid pixel represents a 25 meter x 25 meter geographic area.</p>
<p><img alt="survey sap map" src="_images/survey-burn-in.png" /></p>
<p>One-by-one, each rasterized polygon is <code class="docutils literal notranslate"><span class="pre">burned-in</span></code> to the grid, producing a <code class="docutils literal notranslate"><span class="pre">heatmap</span></code> or aggregate sum of SAP value.</p>
<p><img alt="survey sap map" src="_images/survey-sap-heatmap.png" /></p>
<p>More specifically, for each pixel that a polygon overlaps with, the SAP value of the polygon is assigned to that pixel.  The accumulated SAP values for each pixel are summed to produce a final grid, which is output as a geospatial raster image file (GeoTIFF).</p>
<p>Notice that the polygon that had an importance of 10 and a SAP value of .016, results in a pixel SAP value of .016.  This is because the polygon was exactly the size of a pixel (25 square meters).  The sum of all pixel values is 0.32, so this one pixel (and its geographic area) represents <code class="docutils literal notranslate"><span class="pre">(.016</span> <span class="pre">/</span> <span class="pre">.32)</span> <span class="pre">=</span> <span class="pre">5%</span></code> of the overall value or importance.</p>
<div class="section" id="map-interpretation">
<h2>Map Interpretation<a class="headerlink" href="#map-interpretation" title="Permalink to this headline">¶</a></h2>
<p>The magnitude of a pixels value by itself (e.g. <code class="docutils literal notranslate"><span class="pre">.016</span></code>)  is not important.  The real value is in being able to compare one pixel to another, or one group of pixels to another group of pixels.  A higher value means more importance to the group.  And the loss of access to a geographic area with more value will have a greater <code class="docutils literal notranslate"><span class="pre">cost</span></code> to the group.</p>
<p>For this reason, Spatial Access Priority maps are frequently used as a <code class="docutils literal notranslate"><span class="pre">cost</span></code> layer in prioritization software such as <a class="reference external" href="https://marxansolutions.org/">Marxan</a> or <a class="reference external" href="https://prioritizr.net/">PrioritizR</a>, to find spatial planning solutions that maximize for certain factors such as ecological abundance or resilience, while minimizing the cost to groups of people that use the area.</p>
</div>
<div class="section" id="advanced-calculation">
<h2>Advanced Calculation<a class="headerlink" href="#advanced-calculation" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">sapmap</span></code> provided parameters for some advanced calculations.  Review the research literature for more detailed descriptions and use cases.  See the API docs for usage.</p>
<p><code class="docutils literal notranslate"><span class="pre">areaFactor</span></code> - By default the planning units are in meters, which can produce very small SAP values because the denominator is so large.  An areaFactor can be used to linearly scale the area to offset this.  The default value is 1.</p>
<p><code class="docutils literal notranslate"><span class="pre">importanceFactor</span></code> - If a group of polygons should be given more or less importance than others, then an importanceFactor can be used.  The default value is 1.  For example if the polygons (together adding up to 100 importance) represent a person that uses an area only half of the year and it is decided that their areas should therefore have half the importance, then a factor of 0.5 can be given.  Or if the polygons represent the areas and importance of 10 people responding together as group, where other responses only represent a single person, then an importanceFactor of 10 can be assigned.</p>
<p>This more robust and flexible SAP calculation becomes:</p>
<p><img alt="\Large x=\frac{-b\pm\sqrt{b^2-4ac}}{2a}" src="https://latex.codecogs.com/svg.latex?SAP=%5Cfrac%7Bimportance%20*%20importanceFactor%7D%7Barea%20*%20areaFactor%7D" /></p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">sap-map</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation and Usage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Algorithm Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#map-interpretation">Map Interpretation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-calculation">Advanced Calculation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">sapmap module</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="install.html" title="previous chapter">Installation and Usage</a></li>
      <li>Next: <a href="publications.html" title="next chapter">Publications</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, The Regents of the University of California.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/algorithm.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>